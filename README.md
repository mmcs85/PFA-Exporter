# PFA-Exporter
Phaser Flash Asset Exporter

Phaser flash asset exporter lets you export .fla files library symbols to a Phaser Asset document (.js) including a spritesheet atlas in (.png) with JSON metadata.

How it works:

 - Looks in the library for linked symbols and their dependencies and generates a spritesheet for referenced bitmaps.
 - Generates Phaser Asset document with document properties and symbols.

Supported features:

  - Generate atlas and metadata with linked symbols and their dependencies bitmaps.
  - Generate linked symbols and their dependecies.
  - Generate Shapes.
  - Generate Texts.
  - Generate scale and rotation transformations.
  
Not Supported features:

  - Linear and oval gradient fillColor
  - Timeline animations

Phaser Asset document example:
```javascript
// Generated by PFA-Exporter v0.3.6 at Tue, 07 Jun 2016 21:48:53 GMT

(function (lib) {	
var drawPolygon = function(ctx, poly) {
   if(poly.length < 1) return;
   ctx.beginPath();
   ctx.moveTo(poly[0].x, poly[0].y);
   for( var i=1 ; i < poly.length ; i++ ) {
      var p = poly[i];
      if(!p.bc)
          ctx.lineTo(p.x , p.y);
      else
          ctx.bezierCurveTo(p.bc[0],p.bc[1],p.bc[2],p.bc[3], p.x, p.y);
   }
}
// library properties:
lib.properties = {
	width:1024,
	height:745,
	fps:24,
	color:'#FFFFFF',
	atlas: {
		name:'PFA-Exporter',
		image:'PFA-Exporter.png',
		metadata:'PFA-Exporter.json',
	}
};

// symbols:
lib.RabbitLegBitmap = function(game, x, y){
    return game.make.sprite(x, y, 'PFA-Exporter', 'RabbitLegBitmap');
}

lib.S1 = function(game, x, y){
    var group = game.make.group();
    group.x = x;
    group.y = y;
    var instance1 = lib.RabbitLegBitmap(game,13.05,0);
    instance1.scale.set(0.2903594970703125,0.3137664794921875);
    var S1text2 = game.make.text(0,35.85,'Rabbit Leg',{font:" 12pt 'Times New Roman'",fill:'#000000',strokeThickness:2});
    group.addMultiple([instance1,S1text2]);
    return group;
}

lib.Symbol1 = function(game, x, y){
    var group = game.make.group();
    group.x = x;
    group.y = y;
    var instance1 = lib.BackgroundButtom(game,0,0);
    var instance2 = lib.S1(game,4.25,12.15);
    group.addMultiple([instance1,instance2]);
    return group;
}

lib.RabbitLegAward = function(game, x, y){
    var group = game.make.group();
    group.x = x;
    group.y = y;
    var instance1 = lib.Symbol1(game,0,0);
    var RabbitLegAwardtext2 = game.make.text(24,65.85,'2,00 â‚¬',{font:"bold 10pt 'Times New Roman'",fill:'#FFFFFF',strokeThickness:2});
    RabbitLegAwardtext2.scale.set(1,0.6963958740234375);
    group.addMultiple([instance1,RabbitLegAwardtext2]);
    return group;
}

lib.HorseshoeCircle = function(game, x, y){
    var group = game.make.group();
    group.x = x;
    group.y = y;
    var HorseshoeCircle_shape1BD = game.cache.getBitmapData('HorseshoeCircle_shape1BD');
    if(!HorseshoeCircle_shape1BD) {
        HorseshoeCircle_shape1BD = game.make.bitmapData(256, 256, 'HorseshoeCircle_shape1BD', true);
        var ctx = HorseshoeCircle_shape1BD.ctx;
        ctx.strokeStyle = '#000000';
        drawPolygon(ctx, [{x:85.35, y:85.35},{x:50, y:100,bc: [75.6,95.1,63.8,100]},{x:14.65, y:85.35,bc: [36.2,100,24.4,95.1]},{x:0, y:50,bc: [4.9,75.6,0,63.8]},{x:14.65, y:14.65,bc: [0,36.2,4.9,24.4]},{x:50, y:0,bc: [24.4,4.9,36.2,0]},{x:85.35, y:14.65,bc: [63.8,0,75.6,4.9]},{x:100, y:50,bc: [95.1,24.4,100,36.2]},{x:85.35, y:85.35,bc: [100,63.8,95.1,75.6]}]);
        ctx.stroke();
        var gradient2 = ctx.createLinearGradient(-49.987500000000004,99.97500000000001,-49.987500000000004,0);
        gradient2.addColorStop(0, '#004602');
        gradient2.addColorStop(1, '#FFFFFF');
        ctx.fillStyle = gradient2;
        drawPolygon(ctx, [{x:100, y:50},{x:85.35, y:14.65,bc: [95.1,24.4,100,36.2]},{x:50, y:0,bc: [63.8,0,75.6,4.9]},{x:14.65, y:14.65,bc: [24.4,4.9,36.2,0]},{x:0, y:50,bc: [0,36.2,4.9,24.4]},{x:14.65, y:85.35,bc: [4.9,75.6,0,63.8]},{x:50, y:100,bc: [36.2,100,24.4,95.1]},{x:85.35, y:85.35,bc: [75.6,95.1,63.8,100]},{x:100, y:50,bc: [100,63.8,95.1,75.6]}]);
        ctx.fill();
    }
    var HorseshoeCircle_shape1 = game.make.sprite(0, 0, HorseshoeCircle_shape1BD);
    var HorseshoeCircle_shape2BD = game.cache.getBitmapData('HorseshoeCircle_shape2BD');
    if(!HorseshoeCircle_shape2BD) {
        HorseshoeCircle_shape2BD = game.make.bitmapData(256, 256, 'HorseshoeCircle_shape2BD', true);
        var ctx = HorseshoeCircle_shape2BD.ctx;
        ctx.strokeStyle = '#000';
        drawPolygon(ctx, [{x:91.4, y:92.1},{x:11.4, y:92.1},{x:11.4, y:12.1},{x:91.4, y:12.1},{x:91.4, y:92.1}]);
        ctx.stroke();
        drawPolygon(ctx, [{x:91.4, y:12.1},{x:11.4, y:12.1},{x:11.4, y:92.1},{x:91.4, y:92.1},{x:91.4, y:12.1}]);
        ctx.fill();
    }
    var HorseshoeCircle_shape2 = game.make.sprite(0, 0, HorseshoeCircle_shape2BD);
    group.addMultiple([HorseshoeCircle_shape1,HorseshoeCircle_shape2]);
    return group;
}

})(lib = lib||{});
var lib;
```

Usage:
```javascript
var game = new Phaser.Game(lib.properties.width, lib.properties.height, Phaser.AUTO, '', {preload: preload, create: create, update: update });

	function preload() {
		game.load.atlas(lib.properties.atlas.name, lib.properties.atlas.image, lib.properties.atlas.metadata);
	}

	function create() {
		game.stage.backgroundColor = lib.properties.color;
		game.add.existing(lib.RabbitLegAward(game, 250, 250));
	}

	function update() {
	}
```
